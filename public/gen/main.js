/*! For license information please see main.js.LICENSE.txt */
(()=>{var e={487:e=>{var t={utf8:{stringToBytes:function(e){return t.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(t.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t},bytesToString:function(e){for(var t=[],n=0;n<e.length;n++)t.push(String.fromCharCode(e[n]));return t.join("")}}};e.exports=t},12:e=>{var t,n;t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&n.rotl(e,8)|4278255360&n.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=n.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],n=0,r=0;n<e.length;n++,r+=8)t[r>>>5]|=e[n]<<24-r%32;return t},wordsToBytes:function(e){for(var t=[],n=0;n<32*e.length;n+=8)t.push(e[n>>>5]>>>24-n%32&255);return t},bytesToHex:function(e){for(var t=[],n=0;n<e.length;n++)t.push((e[n]>>>4).toString(16)),t.push((15&e[n]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return t},bytesToBase64:function(e){for(var n=[],r=0;r<e.length;r+=3)for(var o=e[r]<<16|e[r+1]<<8|e[r+2],i=0;i<4;i++)8*r+6*i<=8*e.length?n.push(t.charAt(o>>>6*(3-i)&63)):n.push("=");return n.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var n=[],r=0,o=0;r<e.length;o=++r%4)0!=o&&n.push((t.indexOf(e.charAt(r-1))&Math.pow(2,-2*o+8)-1)<<2*o|t.indexOf(e.charAt(r))>>>6-2*o);return n}},e.exports=n},738:e=>{function t(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(t(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&t(e.slice(0,0))}(e)||!!e._isBuffer)}},568:(e,t,n)=>{var r,o,i,s,a;r=n(12),o=n(487).utf8,i=n(738),s=n(487).bin,(a=function(e,t){e.constructor==String?e=t&&"binary"===t.encoding?s.stringToBytes(e):o.stringToBytes(e):i(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||e.constructor===Uint8Array||(e=e.toString());for(var n=r.bytesToWords(e),c=8*e.length,u=1732584193,f=-271733879,h=-1732584194,l=271733878,d=0;d<n.length;d++)n[d]=16711935&(n[d]<<8|n[d]>>>24)|4278255360&(n[d]<<24|n[d]>>>8);n[c>>>5]|=128<<c%32,n[14+(c+64>>>9<<4)]=c;var p=a._ff,T=a._gg,y=a._hh,g=a._ii;for(d=0;d<n.length;d+=16){var v=u,N=f,A=h,w=l;u=p(u,f,h,l,n[d+0],7,-680876936),l=p(l,u,f,h,n[d+1],12,-389564586),h=p(h,l,u,f,n[d+2],17,606105819),f=p(f,h,l,u,n[d+3],22,-1044525330),u=p(u,f,h,l,n[d+4],7,-176418897),l=p(l,u,f,h,n[d+5],12,1200080426),h=p(h,l,u,f,n[d+6],17,-1473231341),f=p(f,h,l,u,n[d+7],22,-45705983),u=p(u,f,h,l,n[d+8],7,1770035416),l=p(l,u,f,h,n[d+9],12,-1958414417),h=p(h,l,u,f,n[d+10],17,-42063),f=p(f,h,l,u,n[d+11],22,-1990404162),u=p(u,f,h,l,n[d+12],7,1804603682),l=p(l,u,f,h,n[d+13],12,-40341101),h=p(h,l,u,f,n[d+14],17,-1502002290),u=T(u,f=p(f,h,l,u,n[d+15],22,1236535329),h,l,n[d+1],5,-165796510),l=T(l,u,f,h,n[d+6],9,-1069501632),h=T(h,l,u,f,n[d+11],14,643717713),f=T(f,h,l,u,n[d+0],20,-373897302),u=T(u,f,h,l,n[d+5],5,-701558691),l=T(l,u,f,h,n[d+10],9,38016083),h=T(h,l,u,f,n[d+15],14,-660478335),f=T(f,h,l,u,n[d+4],20,-405537848),u=T(u,f,h,l,n[d+9],5,568446438),l=T(l,u,f,h,n[d+14],9,-1019803690),h=T(h,l,u,f,n[d+3],14,-187363961),f=T(f,h,l,u,n[d+8],20,1163531501),u=T(u,f,h,l,n[d+13],5,-1444681467),l=T(l,u,f,h,n[d+2],9,-51403784),h=T(h,l,u,f,n[d+7],14,1735328473),u=y(u,f=T(f,h,l,u,n[d+12],20,-1926607734),h,l,n[d+5],4,-378558),l=y(l,u,f,h,n[d+8],11,-2022574463),h=y(h,l,u,f,n[d+11],16,1839030562),f=y(f,h,l,u,n[d+14],23,-35309556),u=y(u,f,h,l,n[d+1],4,-1530992060),l=y(l,u,f,h,n[d+4],11,1272893353),h=y(h,l,u,f,n[d+7],16,-155497632),f=y(f,h,l,u,n[d+10],23,-1094730640),u=y(u,f,h,l,n[d+13],4,681279174),l=y(l,u,f,h,n[d+0],11,-358537222),h=y(h,l,u,f,n[d+3],16,-722521979),f=y(f,h,l,u,n[d+6],23,76029189),u=y(u,f,h,l,n[d+9],4,-640364487),l=y(l,u,f,h,n[d+12],11,-421815835),h=y(h,l,u,f,n[d+15],16,530742520),u=g(u,f=y(f,h,l,u,n[d+2],23,-995338651),h,l,n[d+0],6,-198630844),l=g(l,u,f,h,n[d+7],10,1126891415),h=g(h,l,u,f,n[d+14],15,-1416354905),f=g(f,h,l,u,n[d+5],21,-57434055),u=g(u,f,h,l,n[d+12],6,1700485571),l=g(l,u,f,h,n[d+3],10,-1894986606),h=g(h,l,u,f,n[d+10],15,-1051523),f=g(f,h,l,u,n[d+1],21,-2054922799),u=g(u,f,h,l,n[d+8],6,1873313359),l=g(l,u,f,h,n[d+15],10,-30611744),h=g(h,l,u,f,n[d+6],15,-1560198380),f=g(f,h,l,u,n[d+13],21,1309151649),u=g(u,f,h,l,n[d+4],6,-145523070),l=g(l,u,f,h,n[d+11],10,-1120210379),h=g(h,l,u,f,n[d+2],15,718787259),f=g(f,h,l,u,n[d+9],21,-343485551),u=u+v>>>0,f=f+N>>>0,h=h+A>>>0,l=l+w>>>0}return r.endian([u,f,h,l])})._ff=function(e,t,n,r,o,i,s){var a=e+(t&n|~t&r)+(o>>>0)+s;return(a<<i|a>>>32-i)+t},a._gg=function(e,t,n,r,o,i,s){var a=e+(t&r|n&~r)+(o>>>0)+s;return(a<<i|a>>>32-i)+t},a._hh=function(e,t,n,r,o,i,s){var a=e+(t^n^r)+(o>>>0)+s;return(a<<i|a>>>32-i)+t},a._ii=function(e,t,n,r,o,i,s){var a=e+(n^(t|~r))+(o>>>0)+s;return(a<<i|a>>>32-i)+t},a._blocksize=16,a._digestsize=16,e.exports=function(e,t){if(null==e)throw new Error("Illegal argument "+e);var n=r.wordsToBytes(a(e,t));return t&&t.asBytes?n:t&&t.asString?s.bytesToString(n):r.bytesToHex(n)}},770:function(e){e.exports=(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{StreamDataView:()=>o});var n=function(){function e(e){this.encoding=e||"utf-8"}return e.prototype.decode=function(e){var t=String.fromCharCode.apply(null,Array.from(e));return"utf-8"===this.encoding?decodeURIComponent(escape(t)):t},e}(),r=function(){function e(e){this.encoding=e||"utf-8"}return e.prototype.encode=function(e){return"utf-8"===this.encoding&&(e=unescape(encodeURIComponent(e))),new Uint8Array(e.split("").map((function(e){return e.charCodeAt(0)})))},e}(),o=function(){function e(e,t){this.offset=0,this.autoResize=!1,void 0===e&&(e=0,this.autoResize=!0),"number"==typeof e&&(e=new ArrayBuffer(e)),this.view=new DataView(e),this.littleEndian=!t}return e.fromByteString=function(t){var n=new e(t.split(" ").length);return n.fromByteString(t),n},e.fromTextString=function(t,n){var o,i=new e((o=n?new r("utf-8").encode(t):new r("ascii").encode(t)).length);return i.setNextString(t,n,o.length),i},e.prototype.resize=function(e){var t=function(e,t){if(!(e instanceof ArrayBuffer))throw new TypeError("Source must be an instance of ArrayBuffer");if(t<=e.byteLength)return e.slice(0,t);var n=new Uint8Array(e),r=new Uint8Array(new ArrayBuffer(t));return r.set(n),r.buffer}(this.getBuffer(),e);this.view=new DataView(t)},e.prototype.crop=function(){this.resize(this.getOffset())},e.prototype.getBuffer=function(){return this.view.buffer},e.prototype.skip=function(e){this.offset+=e},e.prototype.resetOffset=function(){this.offset=0},e.prototype.getOffset=function(){return this.offset},e.prototype.setOffset=function(e){this.offset=e},e.prototype.getInt8=function(e){return this.view.getInt8(e)},e.prototype.getUint8=function(e){return this.view.getUint8(e)},e.prototype.getNextInt8=function(){var e=this.getInt8(this.offset);return this.offset+=1,e},e.prototype.getNextUint8=function(){var e=this.getUint8(this.offset);return this.offset+=1,e},e.prototype.getInt16=function(e){return this.view.getInt16(e,this.littleEndian)},e.prototype.getUint16=function(e){return this.view.getUint16(e,this.littleEndian)},e.prototype.getNextInt16=function(){var e=this.getInt16(this.offset);return this.offset+=2,e},e.prototype.getNextUint16=function(){var e=this.getUint16(this.offset);return this.offset+=2,e},e.prototype.getInt32=function(e){return this.view.getInt32(e,this.littleEndian)},e.prototype.getUint32=function(e){return this.view.getUint32(e,this.littleEndian)},e.prototype.getNextInt32=function(){var e=this.getInt32(this.offset);return this.offset+=4,e},e.prototype.getNextUint32=function(){var e=this.getUint32(this.offset);return this.offset+=4,e},e.prototype.getFloat32=function(e){return this.view.getFloat32(e,this.littleEndian)},e.prototype.getFloat64=function(e){return this.view.getFloat64(e,this.littleEndian)},e.prototype.getNextFloat32=function(){var e=this.getFloat32(this.offset);return this.offset+=4,e},e.prototype.getNextFloat64=function(){var e=this.getFloat64(this.offset);return this.offset+=8,e},e.prototype.setInt8=function(e,t){this.handleAutoResize(e,1),this.view.setInt8(e,t)},e.prototype.setUint8=function(e,t){this.handleAutoResize(e,1),this.view.setUint8(e,t)},e.prototype.setNextInt8=function(e){this.setInt8(this.offset,e),this.offset+=1},e.prototype.setNextUint8=function(e){this.setUint8(this.offset,e),this.offset+=1},e.prototype.setInt16=function(e,t){this.handleAutoResize(e,2),this.view.setInt16(e,t,this.littleEndian)},e.prototype.setUint16=function(e,t){this.handleAutoResize(e,2),this.view.setUint16(e,t,this.littleEndian)},e.prototype.setNextInt16=function(e){this.setInt16(this.offset,e),this.offset+=2},e.prototype.setNextUint16=function(e){this.setUint16(this.offset,e),this.offset+=2},e.prototype.setInt32=function(e,t){this.handleAutoResize(e,4),this.view.setInt32(e,t,this.littleEndian)},e.prototype.setUint32=function(e,t){this.handleAutoResize(e,4),this.view.setUint32(e,t,this.littleEndian)},e.prototype.setNextInt32=function(e){this.setInt32(this.offset,e),this.offset+=4},e.prototype.setNextUint32=function(e){this.setUint32(this.offset,e),this.offset+=4},e.prototype.setFloat32=function(e,t){this.handleAutoResize(e,8),this.view.setFloat32(e,t,this.littleEndian)},e.prototype.setFloat64=function(e,t){this.handleAutoResize(e,8),this.view.setFloat64(e,t,this.littleEndian)},e.prototype.setNextFloat32=function(e){this.setFloat32(this.offset,e),this.offset+=4},e.prototype.setNextFloat64=function(e){this.setFloat64(this.offset,e),this.offset+=8},e.prototype.getBytes=function(e,t){void 0===e&&(e=0),t=t||this.view.buffer.byteLength-e;var n=this.getBuffer().slice(e,e+t);return new Uint8Array(n)},e.prototype.getNextBytes=function(e){var t=this.getBytes(this.offset,e);return this.offset+=e||0,t},e.prototype.setBytes=function(e,t){(t instanceof ArrayBuffer||Array.isArray(t))&&(t=new Uint8Array(t));var n=t;this.handleAutoResize(e,n.byteLength);for(var r=0;r<n.byteLength;r++)this.setUint8(e+r,n[r])},e.prototype.setNextBytes=function(e){Array.isArray(e)&&(e=new Uint8Array(e)),this.setBytes(this.offset,e),this.offset+=e.byteLength},e.prototype.getString=function(e,t,r,o){var i=this.getBytes(e,t);if(o){var s=i.indexOf(0);s>=0&&(i=i.slice(0,s))}return r?new n("utf-8").decode(i):new n("ascii").decode(i)},e.prototype.getNextString=function(e,t,n){var r=this.getString(this.offset,e,t,n);return this.offset+=e,r},e.prototype.setString=function(e,t,n,o){var i;i=n?new r("utf-8").encode(t):new r("ascii").encode(t),o="number"==typeof o?o:i.byteLength,this.handleAutoResize(e,o);for(var s=0;s<o;s++)this.view.setUint8(e+s,i[s]||0);return o},e.prototype.setNextString=function(e,t,n){this.offset+=this.setString(this.offset,e,t,n)},e.prototype.toByteString=function(){return Array.from(new Uint8Array(this.getBuffer())).map((function(e){return("00"+e.toString(16)).slice(-2)})).join(" ").toUpperCase()},e.prototype.toTextString=function(e){return this.getString(0,this.view.byteLength,e)},e.prototype.fromByteString=function(e){var t=e.split(" "),n=new ArrayBuffer(t.length);this.view=new DataView(n),this.setNextBytes(new Uint8Array(t.map((function(e){return parseInt(e,16)})))),this.resetOffset()},e.prototype.getLength=function(){return this.view.byteLength},e.prototype.clear=function(){this.view=new DataView(new ArrayBuffer(this.view.byteLength)),this.offset=0},e.prototype.handleAutoResize=function(e,t){this.autoResize&&this.getBuffer().byteLength<e+t&&this.resize(e+t)},e}();return t})()}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";class e{load(e){return t=this,n=void 0,o=function*(){const t=yield fetch(e);return"json"===function(e){return e.split(".").pop()}(e)?yield t.json():yield t.text()},new((r=void 0)||(r=Promise))((function(e,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(s,a)}c((o=o.apply(t,n||[])).next())}));var t,n,r,o}}var t,r,o=n(770);!function(e){e[e.UNDEFINED=0]="UNDEFINED",e[e.NULL=1]="NULL",e[e.BOOLEAN_FALSE=2]="BOOLEAN_FALSE",e[e.BOOLEAN_TRUE=3]="BOOLEAN_TRUE",e[e.INT8=4]="INT8",e[e.UINT8=5]="UINT8",e[e.INT16=6]="INT16",e[e.UINT16=7]="UINT16",e[e.INT32=8]="INT32",e[e.UINT32=9]="UINT32",e[e.FLOAT32=10]="FLOAT32",e[e.FLOAT64=11]="FLOAT64",e[e.STRING=12]="STRING",e[e.UNICODE=13]="UNICODE",e[e.OBJECT_8=17]="OBJECT_8",e[e.OBJECT_16=18]="OBJECT_16",e[e.OBJECT_32=19]="OBJECT_32",e[e.SPLIT_8=20]="SPLIT_8",e[e.SPLIT_16=21]="SPLIT_16",e[e.SPLIT_32=22]="SPLIT_32",e[e.ARRAY_8=23]="ARRAY_8",e[e.ARRAY_16=24]="ARRAY_16",e[e.ARRAY_32=25]="ARRAY_32",e[e.OFFSET_ARRAY_8=26]="OFFSET_ARRAY_8",e[e.OFFSET_ARRAY_16=27]="OFFSET_ARRAY_16",e[e.OFFSET_ARRAY_32=28]="OFFSET_ARRAY_32"}(t||(t={})),function(e){e[e.DONE=100]="DONE",e[e.MULTI=101]="MULTI"}(r||(r={}));const i=[t.UINT8,t.INT8,t.UINT16,t.INT16,t.UINT32,t.INT32,t.FLOAT32,t.FLOAT64];class s{constructor(e){this.streamDataView=e}encodeTokens(e){let t=0;for(;t<e.length;){const n=this.encodeMulti(e,t);n?t+=n:(this.encodeToken(e[t]),t++)}this.encodeTag(r.DONE)}decodeTokens(){const e=[];for(;this.streamDataView.getOffset()<this.streamDataView.getLength();){const t=this.decodeTagOrDataType();if(t===r.DONE)break;t===r.MULTI?this.decodeMulti(t,e):e.push(this.decodeToken(t))}return e}encodeToken(e,n){const r=null!=n?n:this.encodeDataType(this.getDataType(e));switch(r){case t.UNDEFINED:case t.NULL:case t.BOOLEAN_TRUE:case t.BOOLEAN_FALSE:break;case t.INT8:case t.UINT8:case t.INT16:case t.UINT16:case t.INT32:case t.UINT32:case t.FLOAT32:case t.FLOAT64:this.encodeSingleNumber(e.value,r);break;case t.STRING:case t.UNICODE:this.encodeString(e.value,r);break;case t.OBJECT_8:case t.OBJECT_16:case t.OBJECT_32:this.encodeObjectToken(e,r);break;case t.SPLIT_8:case t.SPLIT_16:case t.SPLIT_32:this.encodeSplitToken(e,r);break;case t.ARRAY_8:case t.ARRAY_16:case t.ARRAY_32:case t.OFFSET_ARRAY_8:case t.OFFSET_ARRAY_16:case t.OFFSET_ARRAY_32:this.encodeArrayToken(e,r);break;default:throw new Error("Invalid dataType: "+r)}}decodeToken(e){const n=null!=e?e:this.decodeDataType();switch(n){case t.UNDEFINED:return{type:"leaf",value:void 0};case t.NULL:return{type:"leaf",value:null};case t.BOOLEAN_TRUE:return{type:"leaf",value:!0};case t.BOOLEAN_FALSE:return{type:"leaf",value:!1};case t.INT8:case t.UINT8:case t.INT16:case t.UINT16:case t.INT32:case t.UINT32:case t.FLOAT32:case t.FLOAT64:return{type:"leaf",value:this.decodeSingleNumber(n)};case t.STRING:case t.UNICODE:return{type:"leaf",value:this.decodeString(n)};case t.OBJECT_8:case t.OBJECT_16:case t.OBJECT_32:return this.decodeObjectToken(n);case t.SPLIT_8:case t.SPLIT_16:case t.SPLIT_32:return this.decodeSplitToken(n);case t.ARRAY_8:case t.ARRAY_16:case t.ARRAY_32:case t.OFFSET_ARRAY_8:case t.OFFSET_ARRAY_16:case t.OFFSET_ARRAY_32:return this.decodeArrayToken(n);default:throw new Error("Invalid dataType: "+n)}}isOffsetDataType(e){return e===t.OFFSET_ARRAY_8||e===t.OFFSET_ARRAY_16||e===t.OFFSET_ARRAY_32}encodeArrayToken(e,n){const r=null!=n?n:this.encodeDataType(this.getDataType(e)),o=r===t.ARRAY_8||r===t.OFFSET_ARRAY_8?t.UINT8:r===t.ARRAY_16||r===t.OFFSET_ARRAY_16?t.UINT16:t.UINT32;let i=e.value;if(this.isOffsetDataType(r)){const e=Math.min(...i);i=i.map((t=>t-e)),this.encodeSingleNumber(e)}this.encodeNumberArray(i,o)}decodeArrayToken(e){const n=null!=e?e:this.decodeDataType();let r=0;this.isOffsetDataType(n)&&(r=this.decodeSingleNumber());const o=n===t.ARRAY_8||n===t.OFFSET_ARRAY_8?t.UINT8:n===t.ARRAY_16||n===t.OFFSET_ARRAY_16?t.UINT16:t.UINT32;return{type:"array",value:this.decodeNumberArray(o).map((e=>e+r))}}encodeObjectToken(e,n){const r=null!=n?n:this.encodeDataType(this.getDataType(e)),o=r===t.OBJECT_8?t.UINT8:r===t.OBJECT_16?t.UINT16:t.UINT32,[i,s]=e.value;this.encodeSingleNumber(i,o),this.encodeSingleNumber(s,o)}decodeObjectToken(e){const n=null!=e?e:this.decodeDataType(),r=n===t.OBJECT_8?t.UINT8:n===t.OBJECT_16?t.UINT16:t.UINT32;return{type:"object",value:[this.decodeSingleNumber(r),this.decodeSingleNumber(r)]}}encodeSplitToken(e,n){const r=null!=n?n:this.encodeDataType(this.getDataType(e)),o=r===t.SPLIT_8?t.UINT8:r===t.SPLIT_16?t.UINT16:t.UINT32,[i,s]=e.value;this.encodeSingleNumber(i,o),this.encodeSingleNumber(s,o)}decodeSplitToken(e){const n=null!=e?e:this.decodeDataType(),r=n===t.SPLIT_8?t.UINT8:n===t.SPLIT_16?t.UINT16:t.UINT32;return{type:"split",value:[this.decodeSingleNumber(r),this.decodeSingleNumber(r)]}}encodeTag(e){this.streamDataView.setNextUint8(e)}decodeTag(){return this.streamDataView.getNextUint8()}decodeTagOrDataType(){return this.streamDataView.getNextUint8()}encodeDataType(e){return this.streamDataView.setNextUint8(e),e}decodeDataType(){return this.streamDataView.getNextUint8()}encodeMulti(e,n){const o=this.getDataType(e[n]);let i;const s=Math.min(e.length-n,256);for(i=1;i<s&&this.getDataType(e[n+i])===o;i++);if(i>2){this.encodeTag(r.MULTI),this.encodeSingleNumber(i%256,t.UINT8),this.encodeDataType(o);for(let t=0;t<i;t++)this.encodeToken(e[n+t],o);return i}return 0}decodeMulti(e,t){if(e===r.MULTI){const e=this.streamDataView.getNextUint8()||256,n=this.decodeDataType();for(let r=0;r<e;r++)t.push(this.decodeToken(n));return e}return 0}encodeSingleNumber(e,n){const r=null!=n?n:this.encodeDataType(this.getNumberDataType(e));switch(r){case t.UINT8:this.streamDataView.setNextUint8(e);break;case t.INT8:this.streamDataView.setNextInt8(e);break;case t.UINT16:this.streamDataView.setNextUint16(e);break;case t.INT16:this.streamDataView.setNextInt16(e);break;case t.UINT32:this.streamDataView.setNextUint32(e);break;case t.INT32:this.streamDataView.setNextInt32(e);break;case t.FLOAT32:this.streamDataView.setNextFloat32(e);break;case t.FLOAT64:this.streamDataView.setNextFloat64(e);break;default:throw new Error("Invalid dataType for number: "+r)}}decodeSingleNumber(e){const n=null!=e?e:this.decodeDataType();switch(n){case t.UINT8:return this.streamDataView.getNextUint8();case t.INT8:return this.streamDataView.getNextInt8();case t.UINT16:return this.streamDataView.getNextUint16();case t.INT16:return this.streamDataView.getNextInt16();case t.UINT32:return this.streamDataView.getNextUint32();case t.INT32:return this.streamDataView.getNextInt32();case t.FLOAT32:return this.streamDataView.getNextFloat32();case t.FLOAT64:return this.streamDataView.getNextFloat64();default:throw new Error("Invalid dataType for number: "+n)}}numberSatisfyDataType(e,n){if(e%1!=0)switch(n){case t.FLOAT32:return Math.fround(e)===e;case t.FLOAT64:return!0;default:return!1}switch(n){case t.UINT8:return e>=0&&e<=255;case t.INT8:return e>=-128&&e<=127;case t.UINT16:return e>=0&&e<=65535;case t.INT16:return e>=-32768&&e<=32767;case t.UINT32:return e>=0;case t.INT32:return!0}return!1}getBestType(e){if(e.some((e=>e%1!=0)))return e.every((e=>this.numberSatisfyDataType(e,t.FLOAT32)))?t.FLOAT32:t.FLOAT64;const n=Math.min(...e),r=Math.max(...e);for(let e of i)if(this.numberSatisfyDataType(n,e)&&this.numberSatisfyDataType(r,e))return e;return t.FLOAT64}encodeNumberArray(e,n){let r;for(r=0;r<e.length;){const o=Math.min(255,e.length-r);if(this.encodeSingleNumber(o,t.UINT8),!o)break;const i=null!=n?n:this.encodeDataType(this.getBestType(e));for(let t=0;t<o;t++)this.encodeSingleNumber(e[r+t],i);r+=o}}decodeNumberArray(e){let n;const r=[];do{if(n=this.decodeSingleNumber(t.UINT8),!n)break;const o=null!=e?e:this.decodeDataType();for(let e=0;e<n;e++)r.push(this.decodeSingleNumber(o))}while(n>=255);return r}getNumberDataType(e){for(let t of i)if(this.numberSatisfyDataType(e,t))return t;return t.UNDEFINED}getStringDataType(e){return e.split("").map((e=>e.charCodeAt(0))).every((e=>e<=255))?t.STRING:t.UNICODE}getDataType(e){switch(e.type){case"array":case"object":case"split":let n=e.value,r=0;if("array"===e.type&&n.length>3){const e=Math.min(...n),t=Math.max(...n);this.getNumberDataType(t-e)!==this.getNumberDataType(t)&&(r=e),n=n.map((e=>e-r))}const o=this.getBestType(n);switch(e.type){case"object":return o===t.UINT8?t.OBJECT_8:o===t.UINT16?t.OBJECT_16:t.OBJECT_32;case"split":return o===t.UINT8?t.SPLIT_8:o===t.UINT16?t.SPLIT_16:t.SPLIT_32;case"array":return r?o===t.UINT8?t.OFFSET_ARRAY_8:o===t.UINT16?t.OFFSET_ARRAY_16:t.OFFSET_ARRAY_32:o===t.UINT8?t.ARRAY_8:o===t.UINT16?t.ARRAY_16:t.ARRAY_32}case"leaf":if(void 0===e.value)return t.UNDEFINED;if(null===e.value)return t.NULL;switch(typeof e.value){case"boolean":return e.value?t.BOOLEAN_TRUE:t.BOOLEAN_FALSE;case"string":return this.getStringDataType(e.value);case"number":return this.getNumberDataType(e.value)}}throw new Error(`Unrecognized type for ${e.type} value: ${e.value}`)}dataTypeToType(e){switch(e){case t.ARRAY_8:case t.ARRAY_16:case t.ARRAY_32:return"array";case t.OBJECT_8:case t.OBJECT_16:case t.OBJECT_32:return"object";case t.SPLIT_8:case t.SPLIT_16:case t.SPLIT_32:return"split";default:return"leaf"}}encodeString(e,n){const r=e.split("").map((e=>e.charCodeAt(0)));r.push(0);const o=(null!=n?n:this.encodeDataType(this.getStringDataType(e)))===t.STRING?t.UINT8:t.UINT16;r.forEach((e=>this.encodeSingleNumber(e,o)))}decodeString(e){const n=[],r=(null!=e?e:this.decodeDataType())===t.STRING?t.UINT8:t.UINT16;for(;;){const e=this.decodeSingleNumber(r);if(!e)break;n.push(e)}return n.map((e=>String.fromCharCode(e))).join("")}static selfTest(){[(e,n,r)=>{this.testAction(t.STRING,(t=>e.encodeDataType(t)),r,(()=>n.decodeDataType()))},(e,n,r)=>{this.testAction(t.UNDEFINED,(t=>e.encodeDataType(t)),r,(()=>n.decodeDataType()))},(e,n,r)=>{this.testAction(33,(n=>e.encodeSingleNumber(n,t.INT8)),r,(()=>n.decodeSingleNumber(t.INT8)))},(e,t,n)=>{this.testAction([{type:"leaf",value:123},{type:"leaf",value:45},{type:"leaf",value:67},{type:"leaf",value:89}],(t=>e.encodeMulti(t,0)),n,(()=>{const e=[];return t.decodeMulti(t.decodeTag(),e),e}))},(e,t,n)=>{this.testAction([{type:"leaf",value:1000001},{type:"leaf",value:1002e3},{type:"leaf",value:1003001}],(t=>e.encodeMulti(t,0)),n,(()=>{const e=[];return t.decodeMulti(t.decodeTag(),e),e}))},(e,t,n)=>{this.testAction([1,2,3,4,10,20,200],(t=>e.encodeNumberArray(t)),n,(()=>t.decodeNumberArray()))},(e,t,n)=>{this.testAction([1e4,-202,3,4,10,20,3200],(t=>e.encodeNumberArray(t)),n,(()=>t.decodeNumberArray()))},(e,t,n)=>{this.testAction("test-string",(t=>e.encodeString(t)),n,(()=>t.decodeString()))},(e,n,r)=>{this.testAction("test-string",(n=>e.encodeString(n,t.STRING)),r,(()=>n.decodeString(t.STRING)))},(e,t,n)=>{this.testAction("test-😀😃😄😁😆",(t=>e.encodeString(t)),n,(()=>t.decodeString()))},(e,t,n)=>{this.testAction({type:"object",value:[200,201]},(t=>e.encodeObjectToken(t)),n,(()=>t.decodeObjectToken()))},(e,t,n)=>{this.testAction({type:"object",value:[2e3,2001]},(t=>e.encodeObjectToken(t)),n,(()=>t.decodeObjectToken()))},(e,n,r)=>{this.testAction({type:"object",value:[2e3,2001]},(n=>e.encodeObjectToken(n,t.OBJECT_32)),r,(()=>n.decodeObjectToken(t.OBJECT_32)))},(e,t,n)=>{this.testAction({type:"split",value:[200,201]},(t=>e.encodeSplitToken(t)),n,(()=>t.decodeSplitToken()))},(e,t,n)=>{this.testAction({type:"split",value:[2e3,2001]},(t=>e.encodeSplitToken(t)),n,(()=>t.decodeSplitToken()))},(e,n,r)=>{this.testAction({type:"split",value:[2e3,2001]},(n=>e.encodeSplitToken(n,t.SPLIT_32)),r,(()=>n.decodeSplitToken(t.SPLIT_32)))},(e,t,n)=>{this.testAction({type:"leaf",value:"token-string"},(t=>e.encodeToken(t)),n,(()=>t.decodeToken()))},(e,t,n)=>{this.testAction({type:"leaf",value:123.5},(t=>e.encodeToken(t)),n,(()=>t.decodeToken()))},(e,t,n)=>{this.testAction({type:"leaf",value:"😁😆"},(t=>e.encodeToken(t)),n,(()=>t.decodeToken()))},(e,t,n)=>{this.testAction({type:"array",value:[1,10,20,30,200]},(t=>e.encodeToken(t)),n,(()=>t.decodeToken()))},(e,t,n)=>{this.testAction({type:"array",value:[1001,1010,1020,1030,1200]},(t=>e.encodeToken(t)),n,(()=>t.decodeToken()))},(e,t,n)=>{this.testAction({type:"array",value:[10010,10100,10300,2e4]},(t=>e.encodeToken(t)),n,(()=>t.decodeToken()))},(e,t,n)=>{this.testAction({type:"array",value:[10010,10100,1e4]},(t=>e.encodeToken(t)),n,(()=>t.decodeToken()))}].forEach((e=>{const t=new o.StreamDataView;e(new s(t),new s(t),(()=>t.resetOffset()))}))}static testAction(e,t,n,r,o=((e,t)=>console.assert(JSON.stringify(e)===JSON.stringify(t),"Not equal: \n%s\n!==\n%s",JSON.stringify(e),JSON.stringify(t)))){t(e),n();const i=r();n(),o(i,e)}}class a{constructor(e){this.debug=null!=e&&e}reduce(e){const t={},n=this.createReducedTokens(Object.values(e.registry).filter((e=>e.files.size>1||e.files.has("header"))),t),r=Object.entries(e.files).sort((([e],[t])=>e.localeCompare(t))),o=r.map((([,e])=>t[e.nameToken.hash])),i=r.map((([r,{token:o}])=>{const i=Object.assign({},t),s=Object.values(e.registry).filter((e=>e.files.has(r)&&e!==o));return this.createReducedTokens(s,i,n.length).concat(this.createReducedTokens([o],i,n.length))}));return{headerTokens:n,files:o,getDataTokens:e=>i[e]}}createReducedTokens(e,t,n=0){const r=e.sort(((e,t)=>t.count-e.count));return r.forEach((({hash:e},r)=>{t[e]=r+n})),r.map((e=>{var n,r;return Object.assign({type:e.type,value:null!==(r=null===(n=e.reference)||void 0===n?void 0:n.map((e=>t[e])))&&void 0!==r?r:e.value},this.debug?{debug:e.value}:{})}))}}var c=Uint8Array,u=Uint16Array,f=Uint32Array,h=new c([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),l=new c([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),d=new c([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),p=function(e,t){for(var n=new u(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];var o=new f(n[30]);for(r=1;r<30;++r)for(var i=n[r];i<n[r+1];++i)o[i]=i-n[r]<<5|r;return[n,o]},T=p(h,2),y=T[0],g=T[1];y[28]=258,g[258]=28;for(var v=p(l,0),N=v[0],A=v[1],w=new u(32768),m=0;m<32768;++m){var b=(43690&m)>>>1|(21845&m)<<1;b=(61680&(b=(52428&b)>>>2|(13107&b)<<2))>>>4|(3855&b)<<4,w[m]=((65280&b)>>>8|(255&b)<<8)>>>1}var I=function(e,t,n){for(var r=e.length,o=0,i=new u(t);o<r;++o)e[o]&&++i[e[o]-1];var s,a=new u(t);for(o=0;o<t;++o)a[o]=a[o-1]+i[o-1]<<1;if(n){s=new u(1<<t);var c=15-t;for(o=0;o<r;++o)if(e[o])for(var f=o<<4|e[o],h=t-e[o],l=a[e[o]-1]++<<h,d=l|(1<<h)-1;l<=d;++l)s[w[l]>>>c]=f}else for(s=new u(r),o=0;o<r;++o)e[o]&&(s[o]=w[a[e[o]-1]++]>>>15-e[o]);return s},S=new c(288);for(m=0;m<144;++m)S[m]=8;for(m=144;m<256;++m)S[m]=9;for(m=256;m<280;++m)S[m]=7;for(m=280;m<288;++m)S[m]=8;var O=new c(32);for(m=0;m<32;++m)O[m]=5;var U=I(S,9,0),E=I(S,9,1),_=I(O,5,0),R=I(O,5,1),k=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},D=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(7&t)&n},x=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(7&t)},F=function(e){return(e+7)/8|0},L=function(e,t,n){(null==t||t<0)&&(t=0),(null==n||n>e.length)&&(n=e.length);var r=new(2==e.BYTES_PER_ELEMENT?u:4==e.BYTES_PER_ELEMENT?f:c)(n-t);return r.set(e.subarray(t,n)),r},B=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],j=function(e,t,n){var r=new Error(t||B[e]);if(r.code=e,Error.captureStackTrace&&Error.captureStackTrace(r,j),!n)throw r;return r},C=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>>8},Y=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>>8,e[r+2]|=n>>>16},M=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var o=n.length,i=n.slice();if(!o)return[$,0];if(1==o){var s=new c(n[0].s+1);return s[n[0].s]=1,[s,1]}n.sort((function(e,t){return e.f-t.f})),n.push({s:-1,f:25001});var a=n[0],f=n[1],h=0,l=1,d=2;for(n[0]={s:-1,f:a.f+f.f,l:a,r:f};l!=o-1;)a=n[n[h].f<n[d].f?h++:d++],f=n[h!=l&&n[h].f<n[d].f?h++:d++],n[l++]={s:-1,f:a.f+f.f,l:a,r:f};var p=i[0].s;for(r=1;r<o;++r)i[r].s>p&&(p=i[r].s);var T=new u(p+1),y=V(n[l-1],T,0);if(y>t){r=0;var g=0,v=y-t,N=1<<v;for(i.sort((function(e,t){return T[t.s]-T[e.s]||e.f-t.f}));r<o;++r){var A=i[r].s;if(!(T[A]>t))break;g+=N-(1<<y-T[A]),T[A]=t}for(g>>>=v;g>0;){var w=i[r].s;T[w]<t?g-=1<<t-T[w]++-1:++r}for(;r>=0&&g;--r){var m=i[r].s;T[m]==t&&(--T[m],++g)}y=t}return[new c(T),y]},V=function(e,t,n){return-1==e.s?Math.max(V(e.l,t,n+1),V(e.r,t,n+1)):t[e.s]=n},P=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new u(++t),r=0,o=e[0],i=1,s=function(e){n[r++]=e},a=1;a<=t;++a)if(e[a]==o&&a!=t)++i;else{if(!o&&i>2){for(;i>138;i-=138)s(32754);i>2&&(s(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(s(o),--i;i>6;i-=6)s(8304);i>2&&(s(i-3<<5|8208),i=0)}for(;i--;)s(o);i=1,o=e[a]}return[n.subarray(0,r),t]},z=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},J=function(e,t,n){var r=n.length,o=F(t+2);e[o]=255&r,e[o+1]=r>>>8,e[o+2]=255^e[o],e[o+3]=255^e[o+1];for(var i=0;i<r;++i)e[o+i+4]=n[i];return 8*(o+4+r)},G=function(e,t,n,r,o,i,s,a,c,f,p){C(t,p++,n),++o[256];for(var T=M(o,15),y=T[0],g=T[1],v=M(i,15),N=v[0],A=v[1],w=P(y),m=w[0],b=w[1],E=P(N),R=E[0],k=E[1],D=new u(19),x=0;x<m.length;++x)D[31&m[x]]++;for(x=0;x<R.length;++x)D[31&R[x]]++;for(var F=M(D,7),L=F[0],B=F[1],j=19;j>4&&!L[d[j-1]];--j);var V,G,H,$,W=f+5<<3,q=z(o,S)+z(i,O)+s,Z=z(o,y)+z(i,N)+s+14+3*j+z(D,L)+(2*D[16]+3*D[17]+7*D[18]);if(W<=q&&W<=Z)return J(t,p,e.subarray(c,c+f));if(C(t,p,1+(Z<q)),p+=2,Z<q){V=I(y,g,0),G=y,H=I(N,A,0),$=N;var K=I(L,B,0);for(C(t,p,b-257),C(t,p+5,k-1),C(t,p+10,j-4),p+=14,x=0;x<j;++x)C(t,p+3*x,L[d[x]]);p+=3*j;for(var Q=[m,R],X=0;X<2;++X){var ee=Q[X];for(x=0;x<ee.length;++x){var te=31&ee[x];C(t,p,K[te]),p+=L[te],te>15&&(C(t,p,ee[x]>>>5&127),p+=ee[x]>>>12)}}}else V=U,G=S,H=_,$=O;for(x=0;x<a;++x)if(r[x]>255){te=r[x]>>>18&31,Y(t,p,V[te+257]),p+=G[te+257],te>7&&(C(t,p,r[x]>>>23&31),p+=h[te]);var ne=31&r[x];Y(t,p,H[ne]),p+=$[ne],ne>3&&(Y(t,p,r[x]>>>5&8191),p+=l[ne])}else Y(t,p,V[r[x]]),p+=G[r[x]];return Y(t,p,V[256]),p+G[256]},H=new f([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),$=new c(0),W=function(){for(var e=new Int32Array(256),t=0;t<256;++t){for(var n=t,r=9;--r;)n=(1&n&&-306674912)^n>>>1;e[t]=n}return e}(),q=function(e,t,n,r,o){return function(e,t,n,r,o,i){var s=e.length,a=new c(r+s+5*(1+Math.ceil(s/7e3))+o),d=a.subarray(r,a.length-o),p=0;if(!t||s<8)for(var T=0;T<=s;T+=65535){var y=T+65535;y>=s&&(d[p>>3]=i),p=J(d,p+1,e.subarray(T,y))}else{for(var v=H[t-1],N=v>>>13,w=8191&v,m=(1<<n)-1,b=new u(32768),I=new u(m+1),S=Math.ceil(n/3),O=2*S,U=function(t){return(e[t]^e[t+1]<<S^e[t+2]<<O)&m},E=new f(25e3),_=new u(288),R=new u(32),k=0,D=0,x=(T=0,0),B=0,j=0;T<s;++T){var C=U(T),Y=32767&T,M=I[C];if(b[Y]=M,I[C]=Y,B<=T){var V=s-T;if((k>7e3||x>24576)&&V>423){p=G(e,d,0,E,_,R,D,x,j,T-j,p),x=k=D=0,j=T;for(var P=0;P<286;++P)_[P]=0;for(P=0;P<30;++P)R[P]=0}var z=2,W=0,q=w,Z=Y-M&32767;if(V>2&&C==U(T-Z))for(var K=Math.min(N,V)-1,Q=Math.min(32767,T),X=Math.min(258,V);Z<=Q&&--q&&Y!=M;){if(e[T+z]==e[T+z-Z]){for(var ee=0;ee<X&&e[T+ee]==e[T+ee-Z];++ee);if(ee>z){if(z=ee,W=Z,ee>K)break;var te=Math.min(Z,ee-2),ne=0;for(P=0;P<te;++P){var re=T-Z+P+32768&32767,oe=re-b[re]+32768&32767;oe>ne&&(ne=oe,M=re)}}}Z+=(Y=M)-(M=b[Y])+32768&32767}if(W){E[x++]=268435456|g[z]<<18|A[W];var ie=31&g[z],se=31&A[W];D+=h[ie]+l[se],++_[257+ie],++R[se],B=T+z,++k}else E[x++]=e[T],++_[e[T]]}}p=G(e,d,i,E,_,R,D,x,j,T-j,p),!i&&7&p&&(p=J(d,p+1,$))}return L(a,0,r+F(p)+o)}(e,null==t.level?6:t.level,null==t.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):12+t.mem,n,r,!o)},Z=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8};function K(e,t){t||(t={});var n=function(){var e=-1;return{p:function(t){for(var n=e,r=0;r<t.length;++r)n=W[255&n^t[r]]^n>>>8;e=n},d:function(){return~e}}}(),r=e.length;n.p(e);var o,i=q(e,t,10+((o=t).filename&&o.filename.length+1||0),8),s=i.length;return function(e,t){var n=t.filename;if(e[0]=31,e[1]=139,e[2]=8,e[8]=t.level<2?4:9==t.level?2:0,e[9]=3,0!=t.mtime&&Z(e,4,Math.floor(new Date(t.mtime||Date.now())/1e3)),n){e[3]=8;for(var r=0;r<=n.length;++r)e[r+10]=n.charCodeAt(r)}}(i,t),Z(i,s-8,n.d()),Z(i,s-4,r),i}function Q(e,t){return function(e,t,n){var r=e.length;if(!r||n&&n.f&&!n.l)return t||new c(0);var o=!t||n,i=!n||n.i;n||(n={}),t||(t=new c(3*r));var s=function(e){var n=t.length;if(e>n){var r=new c(Math.max(2*n,e));r.set(t),t=r}},a=n.f||0,u=n.p||0,f=n.b||0,p=n.l,T=n.d,g=n.m,v=n.n,A=8*r;do{if(!p){a=D(e,u,1);var w=D(e,u+1,3);if(u+=3,!w){var m=e[(P=F(u)+4)-4]|e[P-3]<<8,b=P+m;if(b>r){i&&j(0);break}o&&s(f+m),t.set(e.subarray(P,b),f),n.b=f+=m,n.p=u=8*b,n.f=a;continue}if(1==w)p=E,T=R,g=9,v=5;else if(2==w){var S=D(e,u,31)+257,O=D(e,u+10,15)+4,U=S+D(e,u+5,31)+1;u+=14;for(var _=new c(U),B=new c(19),C=0;C<O;++C)B[d[C]]=D(e,u+3*C,7);u+=3*O;var Y=k(B),M=(1<<Y)-1,V=I(B,Y,1);for(C=0;C<U;){var P,z=V[D(e,u,M)];if(u+=15&z,(P=z>>>4)<16)_[C++]=P;else{var J=0,G=0;for(16==P?(G=3+D(e,u,3),u+=2,J=_[C-1]):17==P?(G=3+D(e,u,7),u+=3):18==P&&(G=11+D(e,u,127),u+=7);G--;)_[C++]=J}}var H=_.subarray(0,S),$=_.subarray(S);g=k(H),v=k($),p=I(H,g,1),T=I($,v,1)}else j(1);if(u>A){i&&j(0);break}}o&&s(f+131072);for(var W=(1<<g)-1,q=(1<<v)-1,Z=u;;Z=u){var K=(J=p[x(e,u)&W])>>>4;if((u+=15&J)>A){i&&j(0);break}if(J||j(2),K<256)t[f++]=K;else{if(256==K){Z=u,p=null;break}var Q=K-254;if(K>264){var X=h[C=K-257];Q=D(e,u,(1<<X)-1)+y[C],u+=X}var ee=T[x(e,u)&q],te=ee>>>4;if(ee||j(3),u+=15&ee,$=N[te],te>3&&(X=l[te],$+=x(e,u)&(1<<X)-1,u+=X),u>A){i&&j(0);break}o&&s(f+131072);for(var ne=f+Q;f<ne;f+=4)t[f]=t[f-$],t[f+1]=t[f+1-$],t[f+2]=t[f+2-$],t[f+3]=t[f+3-$];f=ne}}n.l=p,n.p=Z,n.b=f,n.f=a,p&&(a=1,n.m=g,n.d=T,n.n=v)}while(!a);return f==t.length?t:L(t,0,f)}(e.subarray(function(e){31==e[0]&&139==e[1]&&8==e[2]||j(6,"invalid gzip data");var t=e[3],n=10;4&t&&(n+=e[10]|2+(e[11]<<8));for(var r=(t>>3&1)+(t>>4&1);r>0;r-=!e[n++]);return n+(2&t)}(e),-8),t||new c((r=(n=e).length,(n[r-4]|n[r-3]<<8|n[r-2]<<16|n[r-1]<<24)>>>0)));var n,r}var X="undefined"!=typeof TextDecoder&&new TextDecoder;try{X.decode($,{stream:!0})}catch(e){}"function"==typeof queueMicrotask?queueMicrotask:"function"==typeof setTimeout&&setTimeout;class ee{encode(e){return K(new Uint8Array(e)).buffer}decode(e){return Q(new Uint8Array(e)).buffer}}const te="1.0.6";var ne=n(568),re=n.n(ne);const oe=/\W+/g,ie=/(\w\W+|\W+\w)/;function se(e){return Array.isArray(e)?"array":"object"==typeof e&&e?"object":"string"==typeof e&&ie.test(e)?"split":"leaf"}class ae{constructor(){this.loader=new e}load(...e){return t=this,n=void 0,o=function*(){if(e.some((e=>"string"!=typeof e)))throw new Error("Each argument passed to load must be a string.");const t=e.sort(),n=yield Promise.all(t.map(this.loader.load));return this.tokenize(Object.fromEntries(n.map(((e,n)=>[t[n],e]))))},new((r=void 0)||(r=Promise))((function(e,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(s,a)}c((o=o.apply(t,n||[])).next())}));var t,n,r,o}tokenize(e){const t={registry:{},files:{}},n={next:0};return Object.entries(e).forEach((([e,r])=>{t.files[e]={nameToken:this.tokenizeHelper(e,t.registry,n,"header"),token:this.tokenizeHelper(r,t.registry,n,e)}})),t}registerToken(e,t,n,r,o,i){var s;const a=null!==(s=n[e])&&void 0!==s?s:n[e]={type:se(t),hash:e,value:t,reference:i,order:r.next++,count:0,files:new Set};return a.files.add(o),a.count++,a}tokenizeHelper(e,t,n,r){const o=se(e);if("array"===o){if(!Array.isArray(e))throw new Error("item should be an array");const o=e.map((e=>this.tokenizeHelper(e,t,n,r))).map((({hash:e})=>e)),i=re()(o.join(","));return this.registerToken(i,e,t,n,r,o)}if("object"===o){const o=Object.entries(e),i=this.tokenizeHelper(o.map((([e])=>e)),t,n,r),s=this.tokenizeHelper(o.map((([,e])=>e)),t,n,r),a=re()(`${i.hash}|${s.hash}`);return this.registerToken(a,e,t,n,r,[i.hash,s.hash])}if("split"===o){const o=e.split(oe),i=e.match(oe),s=this.tokenizeHelper(o,t,n,r),a=this.tokenizeHelper(i,t,n,r),c=re()(`${s.hash}-${a.hash}`);return this.registerToken(c,e,t,n,r,[s.hash,a.hash])}return this.registerToken(re()(JSON.stringify(e)),e,t,n,r)}}const ce={cacheable:!0,allowReferences:!1};class ue{constructor(e,t){this.extractor=new fe,this.dataStore=e,this.config=Object.assign(Object.assign({},ce),t);const n=this.extractor.extractFileNames(e.files,e.headerTokens,this.config);this.fileToSlot=Object.fromEntries(n.map(((e,t)=>[e,t])))}extract(e,t){const n=this.fileToSlot[e],r=this.dataStore.getDataTokens(n);if(r)return this.extractor.extract(this.dataStore.headerTokens,r,Object.assign(Object.assign({},this.config),{allowReferences:null!=t?t:this.config.allowReferences}))}}class fe{constructor(){this.valueFetcher={array:this.getArray.bind(this),leaf:void 0,object:this.getObject.bind(this),split:this.getSplit.bind(this)}}extractFileNames(e,t,n){return e.map((e=>this.extractToken(e,t,void 0,n)))}extract(e,t,n){return this.extractToken(e.length+t.length-1,e,t,n)}extractToken(e,t,n,r,o){const i=e<t.length?t[e]:null==n?void 0:n[e-t.length];if(!i)throw new Error("Invalid token at index: "+e);return"leaf"===i.type?i.value:this.extractValueOrCache(i,t,n,r,o||r.allowReferences,this.valueFetcher[i.type])}getArray(e,t,n,r){if(!Array.isArray(e.value))throw new Error("Invalid array token");return e.value.map((e=>this.extractToken(e,t,n,r)))}getObject(e,t,n,r){const[o,i]=e.value,s=this.extractToken(o,t,n,r,!0),a=this.extractToken(i,t,n,r);return Object.fromEntries(s.map(((e,t)=>[e,a[t]])))}getSplit(e,t,n,r){const[o,i]=e.value,s=this.extractToken(o,t,n,r,!0),a=this.extractToken(i,t,n,r,!0);return s.map(((e,t)=>{var n;return`${e}${null!==(n=a[t])&&void 0!==n?n:""}`})).join("")}extractValueOrCache(e,t,n,r,o,i){if(void 0!==e.cache&&o)return e.cache;if(!i)throw new Error("getValue not provided.");const s=i(e,t,n,r);return r.cacheable&&(e.cache=s),s}}var he,le=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};!function(e){e[e.NONE=0]="NONE",e[e.FFLATE=1]="FFLATE"}(he||(he={}));const de=[void 0,()=>new ee],pe={Loader:e,Compressor:class{applyEncoders(e,t){let n=e;return t.forEach((e=>{n=e.encode(n)})),n}applyDecoders(e,t){let n=e;return t.forEach((e=>{n=e.decode(n)})),n}loadAndCompress(e){return le(this,void 0,void 0,(function*(){const t=new ae,n=yield t.load(...e),r=(new a).reduce(n);return this.compressDataStore(r)}))}compress(e){const t=(new ae).tokenize(e),n=(new a).reduce(t);return this.compressDataStore(n)}loadAndExpand(e){return le(this,void 0,void 0,(function*(){const t=yield fetch(e),n=yield t.arrayBuffer();return this.expand(n)}))}expand(e,t){return new ue(this.expandDataStore(e),t)}compressDataStore(e,t=[he.FFLATE]){const n=new o.StreamDataView,r=new s(n);r.encodeTokens(e.headerTokens),r.encodeNumberArray(e.files);const i=new o.StreamDataView;i.setNextUint8(te.length),i.setNextString(te),t.forEach((e=>i.setNextUint8(e))),i.setNextUint8(0);const a=t.map((e=>{var t;return null===(t=de[e])||void 0===t?void 0:t.call(de)})).filter((e=>!!e)),c=this.applyEncoders(n.getBuffer(),a);i.setNextUint32(c.byteLength),i.setNextBytes(c);for(let t=0;t<e.files.length;t++){const n=new o.StreamDataView;new s(n).encodeTokens(e.getDataTokens(t));const r=this.applyEncoders(n.getBuffer(),a);i.setNextUint32(r.byteLength),i.setNextBytes(r)}return i.setNextUint32(0),i.getBuffer()}expandDataStore(e){var t;let n=e;const r=new o.StreamDataView(n),i=r.getNextString(r.getNextUint8());i!=te&&console.warn("Compressor is v.%s but the data was compressed with v.%s",te,i);const a=[];do{const e=r.getNextUint8();if(e===he.NONE)break;const n=null===(t=de[e])||void 0===t?void 0:t.call(de);n&&a.push(n)}while(r.getOffset()<r.getLength());const c=r.getNextUint32(),u=this.applyDecoders(r.getNextBytes(c).buffer,a),f=new s(new o.StreamDataView(u)),h=f.decodeTokens(),l=f.decodeNumberArray(),d=[];do{const e=r.getNextUint32();if(!e)break;d.push(r.getNextBytes(e))}while(r.getOffset()<r.getLength());return{headerTokens:h,files:l,getDataTokens:e=>{const t=this.applyDecoders(d[e],a),n=new o.StreamDataView(t);return new s(n).decodeTokens()}}}},TokenEncoder:s};globalThis.exports=pe})()})();
//# sourceMappingURL=main.js.map